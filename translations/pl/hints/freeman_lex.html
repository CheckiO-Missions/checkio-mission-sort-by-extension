<body data-author="freeman_lex">
<div class="question-answer">
    <div class="question">
        <p>
            Nie mam pojÄ™cia, jak zaczÄ…Ä‡ rozwiÄ…zywaÄ‡ tÄ™ misjÄ™.
        </p>
    </div>
    <div class="answer">
        <p>
            chodzi o to, aby poprawnie podzieliÄ‡ kaÅ¼dÄ… nazwÄ™ pliku na nazwÄ™ i rozszerzenie i uÅ¼yÄ‡ tych czÄ™Å›ci jako klucza w funkcji sortowania.
        </p>
    </div>
</div>
<div class="question-answer">
    <div class="question">
        <p>
            Od jakiego instrumentu powinienem zaczÄ…Ä‡?
        </p>
    </div>
    <div class="answer">
        <p>
            ProszÄ™ zapoznaÄ‡ siÄ™ z funkcjÄ… <a target="_blank" href="https://www.w3schools.com/python/ref_func_sorted.asp">sorted()</a>. Zwraca ona listÄ™ posortowanÄ… wedÅ‚ug argumentu <b class="code">key</b>. Argument ten jest uÅ¼ywany do kaÅ¼dego elementu listy wejÅ›ciowej, aby znaleÅºÄ‡ jego pozycjÄ™ na liÅ›cie koÅ„cowej. Tak wiÄ™c mogÄ… juÅ¼ PaÅ„stwo napisaÄ‡ deklaracjÄ™ funkcji i instrukcjÄ™ <b class="code">return</b>:
        </p>
        <pre class="brush: python">
def sort_by_ext(files: list[str]) -> list[str]:
     
    return sorted(files, key=sort_key)
        </pre>
    </div>
</div>
<div class="question-answer">
    <div class="question">
        <p>
            Jak postÄ™powaÄ‡ z <b class="code">sort_key</b>?
        </p>
    </div>
    <div class="answer">
        <p>
            Ten argument <b class="code">sort_key</b> jest funkcjÄ… samÄ… w sobie. Musi wiÄ™c Pan napisaÄ‡ dodatkowÄ… funkcjÄ™ <b class="code">sort_key</b>, ktÃ³ra przyjmuje pojedynczÄ… nazwÄ™ pliku jako argument i zwraca jej parametr(y) do wykorzystania w sortowaniu.
        </p>
        <pre class="brush: python">
def sort_key(file: str):

    ...

    return ...
        </pre>
    </div>
</div>
<div class="question-answer">
    <div class="question">
        <p>
            Nadal nie rozumiem, jak znaleÅºÄ‡ te parametry sortowania dla kaÅ¼dej nazwy pliku. 
        </p>
    </div>
    <div class="answer">
        <p>
            ProszÄ™ przeczytaÄ‡ o metodzie Å‚aÅ„cuchowej <a target="_blank" href="https://www.w3schools.com/python/ref_string_rpartition.asp">str.rpartition(arg)</a>. Dzieli ona ciÄ…g znakÃ³w na trzy czÄ™Å›ci: przed <b class="code">arg</b>, <b class="code">arg</b>, po <b class="code">arg</b>. UÅ¼ywane jest ostatnie wystÄ…pienie <b class="code">arg</b>. Rozszerzenie pliku to czÄ™Å›Ä‡ nazwy pliku po ostatniej kropce. Wszystko przed kropkÄ… jest nazwÄ….
        </p>
        <pre class="brush: python">
def sort_key(file: str):

    name, dot, ext = file.rpartition(".")
         
    return ...
        </pre>
    </div>
</div>
<div class="question-answer">
    <div class="question">
        <p>
            Co robiÄ‡ dalej? ProszÄ™ o podpowiedÅº.
        </p>
    </div>
    <div class="answer">
        <p>
            Tak, to jest najwaÅ¼niejszy krok. Jak wspomniaÅ‚em powyÅ¼ej, powinien Pan uÅ¼yÄ‡ nazwy i rozszerzenia pliku jako klucza sortowania. Musi Pan posortowaÄ‡ pliki najpierw wedÅ‚ug rozszerzenia, a nastÄ™pnie (jeÅ›li rozszerzenie jest takie samo lub go nie ma) - wedÅ‚ug nazwy. Daje to dwa parametry sortowania, jeÅ›li sÄ… zapisane jako krotka:
        </p>
        <pre class="brush: python">
(ext, name)
        </pre>
        <p>
            Ale to dziaÅ‚a, jeÅ›li nazwa pliku ma nazwÄ™:
        </p>
        <pre class="brush: python">
(ext, name) if name ...        
        </pre>
        <p>
            JeÅ›li nie, nazwa pliku powinna znajdowaÄ‡ siÄ™ przed plikami z nazwÄ… i byÄ‡ sortowana wedÅ‚ug rozszerzenia. Tak wiÄ™c w tym przypadku jako pary parametrÃ³w sortowania moÅ¼na uÅ¼yÄ‡ krotki <b class="code">("", ext)</b>. Pusty ciÄ…g znakÃ³w umieszcza te nazwy plikÃ³w przed tymi z nazwami w sortowaniu. Zatem caÅ‚e wyraÅ¼enie parametrÃ³w sortowania to:
        </p>
        <pre class="brush: python">
(ext, name) if name else ("", ext)
# or written as a tuple of tuples with excess by index:
(("", ext), (ext, name))[bool(name)] 
        </pre>
        <p>
            ProszÄ™ uÅ¼yÄ‡ tych wyraÅ¼eÅ„ w instrukcji <b class="code">return</b> funkcji <b class="code">sort_key</b>:
        </p>
        <pre class="brush: python">
def sort_key(file):

    name, _, ext = file.rpartition(".")
        
    return (("", ext), (ext, name))[bool(name)]        
        </pre>
    </div>
</div>
<div class="question-answer">
    <div class="question">
        <p>
            Jak powinno wyglÄ…daÄ‡ moje ostateczne rozwiÄ…zanie?
        </p>
    </div>
    <div class="answer">
        <p>
            Oto ono:
        </p>
        <div class="spoiler">
        <pre class="brush: python">
def sort_by_ext(files: list[str]) -> list[str]:

    return sorted(files, key=sort_key)
        
def sort_key(file) -> tuple[str, str]:
        
    name, dot, ext = file.rpartition(".")
        
    return (("", ext), (ext, name))[bool(name)]        
        </pre>
        </div>
    </div>
</div>
<div class="question-answer">
    <div class="question">
        <p>
            ProszÄ™ pokazaÄ‡ mi wiÄ™cej rozwiÄ…zaÅ„!<br />
        bo chcÄ™ byÄ‡ prawdziwym ğŸ¥‡ Python Ninnjaa!
        </p>
    </div>
    <div class="answer">
        <p>Jasne, proszÄ™ Å‚apaÄ‡!</p>
        <p>
            UÅ¼ywanie <b class="code">rsplit()</b> z <b class="code">maxsplit=1</b> zamiast <b class="code">rpartition</b> i funkcji anonimowej (wyraÅ¼enie<b class="code">lambda</b> ) zamiast nazwanej funkcji dodatkowej.
        </p>
        <div class="spoiler">
        <pre class="brush: python">
def sort_by_ext(files: list[str]) -> list[str]:

    return sorted(files, key = lambda file:
                [(b, a) if a else (a, b) for (a, b) in [file.rsplit('.', 1)]])
        </pre>
        </div>
        <p>
            UÅ¼ycie moduÅ‚u <b class="code">re</b> do zastÄ…pienia kolejnoÅ›ci czÄ™Å›ci w nazwie pliku.
        </p>
        <div class="spoiler">
        <pre class="brush: python">
import re   


def sort_by_ext(files):

    params = r"(.+)\.(.*)|(.+)", r"\2 \3\1"

    return sorted(files, key = lambda x: re.sub(*params, x))
        </pre>
        </div>
        <p>ProszÄ™ kliknÄ…Ä‡ <b>Best Solutions</b> w menu misji i zobaczyÄ‡ wiele innych ciekawych rozwiÄ…zaÅ„!</p>
    </div>
</div>
<div class="question-answer">
    <div class="question">
        <p>
            DziÄ™ki! Teraz wiem i rozumiem wiÄ™cej! Wszystko dziaÅ‚a jak naleÅ¼y!
        </p>
    </div>
    <div class="answer">
        <p>
            miÅ‚o mi to sÅ‚yszeÄ‡!
        </p>
        
    </div>
</div>
</body>
